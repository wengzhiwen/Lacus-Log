{% extends 'base.html' %}
{% block title %}é¦–é¡µ - Lacus-Log{% endblock %}
{% block content %}
<section class="dashboard">
  <h1 class="title">ä»ªè¡¨ç›˜</h1>
  <div class="cards">
    <div class="card" id="todayCard" style="cursor: pointer;">
      <div class="card-header">
        <div class="card-title">ä½œæˆ˜è®¡åˆ’ç»Ÿè®¡</div>
        <div class="card-icon">ğŸ“Š</div>
      </div>
      <div class="card-body">
        <div class="main-data">
          <div class="main-value">{{ dashboard_data.today_count }}</div>
          <div class="main-label">ä»Šæ—¥ä½œæˆ˜è®¡åˆ’</div>
        </div>
        <div class="sub-data">
          <div class="sub-item">
            <div class="sub-value {% if dashboard_data.change_rate >= 0 %}positive{% else %}negative{% endif %}">
              {% if dashboard_data.change_rate >= 0 %}+{% endif %}{{ dashboard_data.change_rate }}%
            </div>
            <div class="sub-label">ç¯æ¯”</div>
          </div>
          <div class="sub-item">
            <div class="sub-value">{{ dashboard_data.week_avg }}</div>
            <div class="sub-label">7æ—¥å¹³å‡</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // è®¾ç½®ä»Šæ—¥ä½œæˆ˜è®¡åˆ’å¡ç‰‡çš„ç‚¹å‡»äº‹ä»¶
  const todayCard = document.getElementById('todayCard');
  if (todayCard) {
    const today = new Date().toISOString().split('T')[0];
    todayCard.addEventListener('click', function() {
      window.location.href = '{{ url_for('calendar.day_view') }}?date=' + today;
    });
  }
});
</script>
{% endblock %}

