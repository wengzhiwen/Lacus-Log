{% extends 'base.html' %}
{% block title %}é¦–é¡µ - Lacus-Log{% endblock %}
{% block content %}
<section class="dashboard">
  <h1 class="title">ä»ªè¡¨ç›˜</h1>
  <div class="cards">
    <div class="card" id="recruitCard" style="cursor: pointer;">
      <div class="card-header">
        <div class="card-title">å¾å¬ç»Ÿè®¡</div>
        <div class="card-icon">ğŸ“‹</div>
      </div>
      <div class="card-body">
        <div class="main-data">
          <div class="main-value">{{ dashboard_data.recruit_today_appointments }}</div>
          <div class="main-label">ä»Šæ—¥çº¦é¢</div>
        </div>
        <div class="sub-data">
          <div class="sub-item">
            <div class="sub-value">{{ dashboard_data.recruit_today_interviews }}</div>
            <div class="sub-label">ä»Šæ—¥åˆ°é¢</div>
          </div>
          <div class="sub-item">
            <div class="sub-value">{{ dashboard_data.recruit_today_new_recruits }}</div>
            <div class="sub-label">ä»Šæ—¥æ–°å¼€æ’­</div>
          </div>
        </div>
      </div>
    </div>
    <div class="card" id="todayCard" style="cursor: pointer;">
      <div class="card-header">
        <div class="card-title">ä½œæˆ˜è®¡åˆ’ç»Ÿè®¡</div>
        <div class="card-icon">ğŸ“Š</div>
      </div>
      <div class="card-body">
        <div class="main-data">
          <div class="main-value">{{ dashboard_data.today_count }}</div>
          <div class="main-label">ä»Šæ—¥ä½œæˆ˜è®¡åˆ’</div>
        </div>
        <div class="sub-data">
          <div class="sub-item">
            <div class="sub-value {% if dashboard_data.change_rate >= 0 %}positive{% else %}negative{% endif %}">
              {% if dashboard_data.change_rate >= 0 %}+{% endif %}{{ dashboard_data.change_rate }}%
            </div>
            <div class="sub-label">ç¯æ¯”</div>
          </div>
          <div class="sub-item">
            <div class="sub-value">{{ dashboard_data.week_avg }}</div>
            <div class="sub-label">7æ—¥å¹³å‡</div>
          </div>
        </div>
      </div>
    </div>
    <div class="card" id="battleRecordCard" style="cursor: pointer;">
      <div class="card-header">
        <div class="card-title">ä½œæˆ˜è®°å½•ç»Ÿè®¡</div>
        <div class="card-icon">ğŸ“ˆ</div>
      </div>
      <div class="card-body">
        <div class="main-data">
          <div class="main-value">{{ "{:,.0f}".format(dashboard_data.battle_today_revenue) }}</div>
          <div class="main-label">ä»Šæ—¥æµæ°´ï¼ˆå…ƒï¼‰</div>
        </div>
        <div class="sub-data">
          <div class="sub-item">
            <div class="sub-value">{{ "{:,.0f}".format(dashboard_data.battle_yesterday_revenue) }}</div>
            <div class="sub-label">æ˜¨æ—¥æµæ°´</div>
          </div>
          <div class="sub-item">
            <div class="sub-value">{{ "{:,.0f}".format(dashboard_data.battle_week_avg_revenue) }}</div>
            <div class="sub-label">7æ—¥å¹³å‡æµæ°´</div>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <div class="card-title">æœºå¸ˆç»Ÿè®¡</div>
        <div class="card-icon">ğŸ‘©â€âœˆï¸</div>
      </div>
      <div class="card-body">
        <div class="main-data">
          <div class="main-value">{{ dashboard_data.pilot_serving_count }}</div>
          <div class="main-label">æœå½¹äººæ•°</div>
        </div>
        <div class="sub-data">
          <div class="sub-item">
            <div class="sub-value">{{ dashboard_data.pilot_intern_serving_count }}</div>
            <div class="sub-label">å®ä¹ æœºå¸ˆ</div>
          </div>
          <div class="sub-item">
            <div class="sub-value">{{ dashboard_data.pilot_official_serving_count }}</div>
            <div class="sub-label">æ­£å¼æœºå¸ˆ</div>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <div class="card-title">å€™è¡¥æœºå¸ˆç»Ÿè®¡</div>
        <div class="card-icon">ğŸ§‘â€ğŸš€</div>
      </div>
      <div class="card-body">
        <div class="main-data">
          <div class="main-value">{{ dashboard_data.candidate_not_recruited_count }}</div>
          <div class="main-label">å€™è¡¥äººæ•°</div>
        </div>
        <div class="sub-data">
          <div class="sub-item">
            <div class="sub-value">{{ dashboard_data.trainee_serving_count }}</div>
            <div class="sub-label">è®­ç»ƒæœºå¸ˆ</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // è®¾ç½®å¾å¬ç»Ÿè®¡å¡ç‰‡çš„ç‚¹å‡»äº‹ä»¶
  const recruitCard = document.getElementById('recruitCard');
  if (recruitCard) {
    recruitCard.addEventListener('click', function() {
      window.location.href = '{{ url_for('recruit.recruit_daily_report') }}';
    });
  }
  
  // è®¾ç½®ä»Šæ—¥ä½œæˆ˜è®¡åˆ’å¡ç‰‡çš„ç‚¹å‡»äº‹ä»¶
  const todayCard = document.getElementById('todayCard');
  if (todayCard) {
    const today = new Date().toISOString().split('T')[0];
    todayCard.addEventListener('click', function() {
      window.location.href = '{{ url_for('calendar.day_view') }}?date=' + today;
    });
  }
  
  // è®¾ç½®ä½œæˆ˜è®°å½•ç»Ÿè®¡å¡ç‰‡çš„ç‚¹å‡»äº‹ä»¶
  const battleRecordCard = document.getElementById('battleRecordCard');
  if (battleRecordCard) {
    battleRecordCard.addEventListener('click', function() {
      window.location.href = '{{ url_for('report.daily_report') }}';
    });
  }
});
</script>
{% endblock %}

