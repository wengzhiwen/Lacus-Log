# 基础-战斗区域管理

战斗区域其实就是机师（主播）用来开播的设备的编号，因为之后会设计通告管理系统，需要为机师什么时间在哪里（战斗区域）开播进行通告排程。

这是是用于进行通告排程的元数据之一的战斗区域的管理模块。

本功能模块只有议长有权限，舰长无权访问。

## 基本约定

- 战斗区域可以被禁用，但是无法删除

## 元数据

| 字段 | 说明 | 参考类型 | 设定 |
|---------|------|------|------|
| ID | 系统中内部使用的唯一编码，用户不可见 | 由技术设计 | 必须 唯一 |
| X坐标 | 其实就是大类，比如“无锡50” | 字符串 | 必须 |
| Y坐标 | 其实就是小类，比如“房间A” | 字符串 | 必须 |
| Z坐标 | 其实就是具体的座位号，比如“11” | 字符串 | 必须 |
| 可用性 | 可用 / 禁用 | 枚举型 | 必须，默认=可用 |

### 元数据之间的关联

- X + Y + Z 不能有重复，定义成复合唯一键

### 交叉关联

- 未来通告会交叉关联到这里

## 管理界面

管理界面的设计参考 机师-机师管理 模块的实现，尽可能统一。

### 列表

- 按X Y Z的字典顺序排列
- 展示字段
    - X坐标 - Y坐标 - Z坐标
    - 可用性
- 点击进入战斗区域详情

底部footbar：新战斗区域按钮：新建战斗区域

#### 筛选

- X坐标
- Y坐标
- 可用性

选择X后，Y坐标筛选器中只留下当前X下存在的Y（去重）。

所有筛选条件可以组合成复合筛选（交集）；

筛选器写入cookie，便于用户使用（记得不要和其他筛选器冲突）。

#### 默认筛选器

- 所有角色：
    - 可用性 = 可用

### 战斗区域详情

展示一个具体的战斗区域的信息。

底部：编辑按钮 生成更多按钮

### 战斗区域新建 / 编辑

略

### 战斗区域生成

点击生成更多按钮进入本UI。

从源战斗区域复制
- X坐标（不可编辑）
- Y坐标（不可编辑）
- Z坐标开始（数字）
- Z坐标结束（数字）

底部：生成按钮

#### 生成步骤

- 检查Z坐标开始是数字
- 检查Z坐标结束是数字
- 检查Z坐标开始小于Z坐标结束
- 按上述设定，排出所有要生成的项目：
    - X，Y，Z坐标开始
    - X，Y，Z坐标开始 + 1
    - X，Y，Z坐标开始 + 2
    - ...
    - X，Y，Z坐标结束
- 检查上述要生成的项目在数据库中是否有重复（因为 X + Y + Z不可重复）
- 向数据写入上述要生成的项目
- 向用户展示本次生成的结果（明细）

生成结束后用户点击确认按钮后跳转到列表页面。