
2025-09-10 修复
- 修复编辑通告时"请填写所有必填项"错误：添加隐藏的battle_area字段，修复前端JavaScript与后端验证字段不匹配的问题
- 添加debug日志帮助定位表单数据问题

2025-09-10 改进
- 改进通告编辑和删除功能，支持"编辑/删除这一次"和"编辑/删除未来所有"选项
- 对循环组内的通告提供两个编辑按钮选项，不再要求必须修改父通告
- 实现循环组分割功能，当用户选择"编辑/删除未来所有"时，自动创建新的循环组
- 隐藏父通告概念，优化用户界面体验
- 新增通告模型方法：split_recurrence_group_from_current、get_future_announcements_in_group、is_in_recurrence_group

2025-09-10 修复
- 通告编辑页补齐机师三联动筛选与初始化逻辑，修复机师下拉无选项问题，并与新建页保持一致的填充顺序。

2025-09-10 修复
- 通告编辑页“检查冲突”结果展示对齐新建页：当无冲突时显示 planned_instances 计划详情（含单事件与多事件汇总），提升一致性与可读性。

# 变更日志

2025-09-10 文档
- 将作战计划相关界面与文档中的“重复组”统一更名为“循环组”。

2025-09-10 修复
- 修正通告列表“默认筛选器：所属=自己”未生效的问题，缺省时默认按当前用户过滤。

2025-09-10 修复
- 通告列表排序从“开始时间倒序”改为“按本地通告日升序、同日按机师昵称”。

## 2025-09-10 新增：
- 通告列表新增“时间”筛选：支持“现在开始”（默认）与“全部”
- 默认仅显示开始时间大于等于当前时间（按GMT+8转换后比较）的通告

## 2025-09-10 界面优化：
- 通告详情页面界面改进：将操作按钮（编辑、删除、变更记录）移动到页面底部，采用footbar吸附式设计
- 优化移动端用户体验，按钮在底部更便于触控操作
- 保持与现有设计风格的一致性，支持安全区域适配
- 调整冲突检查结果显示位置：在新建和编辑通告页面中，冲突检查结果现在显示在"检查冲突"按钮和"创建通告/保存修改"按钮之间，提升用户体验

## 2025-09-10 修复和优化：
- 时间戳处理规则的完整实现和修复
- 新增 `utils/timezone_helper.py` 时间转换工具模块
- 修复所有模型中的UTC时间戳默认值设定
- 修复路由中用户输入时间的GMT+8到UTC转换
- 修复模板中时间显示的UTC到GMT+8转换
- 新增时间处理相关的Jinja2过滤器（local_datetime、local_date、local_time、local_datetime_for_input）
- 优化新建通告页面时间输入体验：
  - 开始时间默认为当天13:00（便于用户输入）
  - 循环结束时间改为只选择日期，时间自动设为23:59
  - 循环结束日期默认为当前月最后一天
- 移除开始时间不能早于当前时间的验证限制，允许创建历史记录和补录数据
- 确保系统严格遵循"数据库存储UTC时间，UI显示和输入GMT+8时间"的设计规则
- 通过验证脚本确认所有时间转换函数工作正常

2025-09-10 修复
- 冲突检查API返回的计划详情与冲突项时间统一转换为GMT+8显示，修复新建与编辑页检查结果时间显示为UTC的问题。

## 2025-09-10 新增：
- 作战计划管理模块，包括通告的创建、编辑、删除、查看功能
- 支持重复事件管理（每日、每周、自定义重复）
- 时间冲突检查和资源占用验证
- 通告变更记录追踪
- 类似日历应用的用户体验设计

## 2025-09-09 新增：
- 完整实现机师管理功能模块，包括数据模型、路由控制、前端界面

## 2025-09-09 新增：
- 战斗区域管理模块（模型、路由、模板、批量生成）并补充单元测试


