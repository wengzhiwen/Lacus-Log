# 主播-通告日历（原“机师-作战计划日历”）

> 术语统一记录（2025-09-26）
> - 历史用语→统一用语：机师→主播；舰长→运营；议长→管理员；战斗区域→开播地点；战区→开播地点；阶级→主播分类；所属→直属运营；X坐标→基地；Y坐标→场地；Z坐标→坐席；作战计划→通告。
> - 本次复核（2025-09-26）：已完成逐段术语检查，正文采用统一用语；数据库/接口字段仍保留历史命名，仅以字段标注说明。
主播-通告日历功能提供类似日历应用的用户体验，让用户能够在月视图、周视图、日视图中切换查看每天通告的安排情况。该功能旨在提供直观的时间管理界面，方便用户快速了解通告的分布和安排。

## 功能概述

通告日历功能参考日历APP的设计理念，提供三种不同的视图模式：
- **月视图**：仿照手机月历APP，显示整月的通告分布
- **周视图**：显示一周的通告安排，包含可用开播地点信息
- **日视图**：类似会议室预订系统的界面，显示单日的详细时间安排

每个视图的右上角都提供视图切换按钮，用户可以根据需要快速切换不同的查看模式。

## 权限控制

- **运营**：拥有完整权限，可以查看所有通告
- **管理员**：拥有完整权限，可以查看所有通告

运营和管理员权限完全相同，无任何功能限制。

## 月视图

### 界面设计
- **默认显示**：当前月份
- **UI风格**：仿照手机的月历APP设计
- **导航控制**：支持前后翻动查看不同月份
- **日期显示**：每天显示为一个格子

### 数据展示
- **通告数量**：每天的格子内显示当日通告的数量
- **当日高亮**：当前日期（如果存在）会进行高亮显示
- **交互功能**：点击月视图中某一日的格子会进入该日的日视图

### 交互逻辑
- **月份切换**：通过左右箭头或手势滑动切换月份
- **日期选择**：点击任意日期格子进入对应的日视图
- **视觉反馈**：悬停和点击状态提供清晰的视觉反馈

## 周视图

### 界面设计
- **默认显示**：当前周（周一到周日）
- **UI风格**：不仿照手机月历APP，采用更简洁的设计
- **导航控制**：支持前后翻动查看不同周
- **布局结构**：从周一到周日，每日一行

### 数据展示
- **通告数量**：每天的格子内显示当日通告的数量
- **可用开播地点**：显示当日未被使用但可用的开播地点数量
- **当日高亮**：当前日期（如果存在）会进行高亮显示
- **交互功能**：点击周视图中某一日的格子会进入该日的日视图

### 交互逻辑
- **周次切换**：通过左右箭头切换不同的周
- **日期选择**：点击任意日期格子进入对应的日视图
- **信息展示**：同时显示通告数量和可用资源信息

## 日视图

### 界面设计
- **默认显示**：当前日期
- **UI风格**：类似会议室预订系统的overall界面
- **导航控制**：支持前后翻动查看不同日期
- **表格布局**：表格形式展示，每列代表一个小时

### 时间轴设计
- **时间范围**：从0点到23点，共24列
- **排序规则**：每个当日计划被使用的开播地点按以下规则排序：
  - **第一排序**：基地字典顺序
  - **第二排序**：场地字典顺序  
  - **第三排序**：坐席如果是数值以数字顺序排序

### 通告展示
- **时间跨度**：将与该日相关（从该日开始或在该日结束）的通告取出
- **布局方式**：像日历行程一样铺到表格中，每个通告占一行N列（N=该通告在当日中发生的时长）
- **计划标注**：每个通告标注格式为"主播昵称[直属运营]-主播分类"
- **高亮显示**：自己的通告（若有）会进行高亮显示

### 交互功能
- **计划点击**：点击具体的通告，跳转到该通告的详情页（可以编辑）
- **日期切换**：通过左右箭头切换不同的日期
- **时间定位**：快速定位到当前时间或特定时间段

## 入口设计

### 菜单入口
- **位置**：在系统主菜单中有独立的入口
- **默认视图**：点击后直接进入周视图
- **权限控制**：只有运营和管理员可以看到此入口

### 仪表盘入口
- **位置**：首页仪表盘中的今日通告卡片
- **默认视图**：点击后进入今日的日视图
- **快捷访问**：提供快速查看今日安排的便捷入口

## 技术实现要点

### 数据查询优化
- **时间范围查询**：根据视图类型优化查询范围
- **关联数据**：预加载主播、开播地点等关联信息
- **缓存策略**：不使用缓存，但可以在MongoDB中追加必要的INDEX

### 排序算法
- **坐标排序**：实现X、Y、坐席的复合排序逻辑
- **数字识别**：坐席的数值识别和数字排序
- **性能优化**：确保大量数据时的排序性能

### 视图切换
- **状态保持**：切换视图时保持当前选中的日期
- **数据同步**：确保不同视图间的数据一致性
- **用户体验**：提供平滑的视图切换动画

### 响应式设计
- **移动优先**：遵循项目的移动优先设计原则
- **触摸优化**：所有交互都针对触摸操作优化
- **卡片式布局**：与现有模块保持一致的卡片式设计风格

## 用户体验设计

### 视觉一致性
- **配色方案**：遵循项目统一的ZAFT红配色方案
- **字体规范**：使用项目统一的字体和字号
- **图标系统**：使用一致的图标和视觉元素

### 交互反馈
- **悬停效果**：提供清晰的悬停状态反馈
- **点击反馈**：点击操作提供即时的视觉反馈
- **加载状态**：数据加载时显示适当的加载指示器

### 错误处理
- **空状态**：无数据时显示友好的空状态提示
- **错误提示**：数据加载失败时提供清晰的错误信息
- **降级处理**：在部分功能不可用时提供降级方案


## 总结

主播-通告日历功能通过提供直观的日历视图，大大提升了通告管理的用户体验。三种视图模式满足了不同场景下的查看需求，从宏观的月度概览到微观的日度详情，为用户提供了完整的时间管理解决方案。

该功能严格遵循项目的设计规范和权限控制机制，确保与现有系统的良好集成，同时为未来的功能扩展预留了充分的空间。
